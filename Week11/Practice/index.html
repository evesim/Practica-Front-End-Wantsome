<DOCTYPE html>
    <html>

    <head>
        <title>Functional Programming</title>
        <meta charset="UTF-8" />
    </head>

    <body>

    </body>
    <script>
        //PURE FUNCTIONS
        function adds2(x) {
            return x + 2
        }

        //IMPURE FUNCTIONS
        // const y = 2;
        // const adder = (x) => {
        //     return x + y;
        // }

        // console.log(adder(4))

        //FUNCTION COMPOSITION
        const add2 = (x) => {
            x + 2;
        }
        const times2 = (y) => {
            y * 2;
        }
        console.log(add2(times2(2))); //6
        console.log(times2(add2(2))); //8

        //IMMUTABILITY
        const person = {
            name: 'Mike',
            age: 22,
        }
        console.log({ person });
        //person.name = 'Jane';

        console.log({ person });

        const newPerson = {
            ...person,      // spread the atributes
            name: 'John',
            gender: 'male',
        }

        console.log({ newPerson });


        const unspreaded = {
            newPerson,
        }

        console.log({ unspreaded });

        const spreaded = {
            ...newPerson,
        }

        console.log({ spreaded });

        //OBJECT FREEZE
        const obj = Object.freeze({  //can be read, but cannot be overwritten
            name: 'Marius',
            age: 22,
            gender: 'male',
        });

        obj.name = 'Emilia';
        console.log(obj);

        //MAP EXERCISES
        //ex1
        const arr = ["john", "JACOB", "jinGleHeimer", "schmidt"];
        const capitalizeNames = (array) => {
            array.map(name => name.charAt(0).toUpperCase() + name.slice(1).toLowerCase());
        }
        console.log(capitalizeNames(arr));
        // ["John", "Jacob", "Jingleheimer", "Schmidt"]

        //ex2
        const number = [2, "5", 100, "100", "blalblala"];
        const doubleEachNumber = (numbers) => {
            const doubled = numbers.map(element => {
                if (Number.isInteger(element)) {
                    return element * 2;
                } else {
                    return element;
                }
            });
        }
        console.log(doubleEachNumber(numbers))

        //ex3
        const arrNames = [
            {
                name: "Angelina",
                surname: "Jolie",
                age: 80
            },
            {
                name: "Eric",
                surname: "Jones",
                age: 27
            },
        ]

        const getPersonsNames = (arrNames) => {
            const names = arr.map(person => {
                arr.map((person) => `${person.name} ${person.surname}`);
                return names;
            });
        }

        console.log(getPersonsNames(arrNames));
        console.log(arrNames);

        //ex4
        const students = ([
            {
                name: "Angelina",
                surname: "Jolie",
                grade: 7
            },
            {
                name: "Eric",
                surname: "Jones",
                grade: 3
            },
        ]);
        const computeExamPass = (students) => {
            const results = students.map(student => {
                if (student.grade >= 5) {
                    return `${student.name} ${student.surname} has passed the exam`
                } else {
                    return `${student.name} ${student.surname} has not passed the exam`
                }
            });
            return results;
        }
        console.log(computeExamPass(students));

        //// - cum afisezi produse in pagina
        const products = [
            {
                productName: "Pasta de dinti",
                price: 11,
                description: "Lorem ipsum bla bla",
                image: 'http://image-url'
            },
            {
                productName: "Gel de dus",
                price: 11,
                description: "Lorem ipsum bla bla",
                image: 'http://image-url'
            },
            {
                productName: "Sapun lichid",
                price: 11,
                description: "Lorem ipsum bla bla",
                image: 'http://image-url'
            },
        ];
        const showProduct = (products) => products.map(product => product);
        console.log(showProduct(products));

        //ex5
        const arrNames2 = [
            {
                name: "Angelina",
                surname: "Jolie",
                age: 80
            },
            {
                name: "Eric",
                surname: "Jones",
                age: 27
            },
        ]
        //build element with html elements
        const getPersonsDomElements = (arrNames2) => {
            const domElements = arrNames2.map(element => {
                return `<h1>${element.name} ${element.surname}</h1><h2>${element.age}</h2>`;
            })
            return domElements;
        }
        console.log(computeExamPass(arrNames2));

        const newDomElements = getPersonsDomElements(arrNames2);

        //displat html elements from the array in page
        const showItemsInPage = (items) => {
            items.map(item => {
                const div = document.createElement('div');
                div.innerHTML = item;
                document.body.appendChild(div);
            })
        }

        showItemsInPage(newDomElements);


        //REDUCE EXERCISES
        const pilots = [
            {
                id: 10,
                name: "Poe Dameron",
                years: 14,
            },
            {
                id: 2,
                name: "Temmin 'Snap' Wexley",
                years: 30,
            },
            {
                id: 41,
                name: "Tallissan Lintra",
                years: 16,
            },
            {
                id: 99,
                name: "Ello Asty",
                years: 22,
            }
        ]

        const totalYears = pilots.reduce((accumulator, pilot) => accumulator + pilot.years, 0);

        /* Ex.1
        Loop through the Array and remove all non-active users from the initial Array */

        const myData = [{
            name: 'Iggy Turskis',
            active: false
        }, {
            name: 'Geoff Newell',
            active: true
        }, {
            name: 'Peter Newnham',
            active: true
        }, {
            name: 'James Walker',
            active: false
        }];

        const activeData = mydata.reduce((acc, curr) => (curr.active ? [...acc, curr] : acc), [])
        //(curr.active ? [ ...acc, curr] : acc), [])
        // {
        //     if (current.active) {
        //         return [
        //             ...acc,
        //             curr,
        //         ]
        //     } else {
        //         return acc;
        //     }
        // },[];
        console.log(activeData);

        /*Ex 2
        Convertiti toate distantele in mile - 0.621371 * distance - folosind map
        Returnati toate itemele cu distanta mai mica de 10000  - folosind filter
        Returnati distanta totala - folosind reduce
*/

        const distances = [
            { from: 'New York', to: 'Dhaka', distance: 12654 },
            { from: 'Sydney', to: 'chittagong', distance: 8858 },
            { from: 'Kolkata', to: 'Sylhet', distance: 670 }
        ]

        const miles = distances.map(mile => {
            return 0.621371 * mile.distance;
        });
        return miles;
        console.log(miles);

        //const filtering = distances.filter(({ distance }) => distance < 1000);
        const filtering = distance.filter((item) => item.distance < 1000);
        return filtering;
        console.log(filtering);

        const totalDistance = distance.reduce((acc, curr) => acc + curr.distance, 0);
        console.log(totalDistance);

        //*Ex 2
        //Returnati un array de obiecte care sa contina doar id si titlul fiecarui item de mai jos 
        const releases = [
            {
                id: 70111470,
                title: "Die Hard",
                boxart: "http://cdn-0.nflximg.com/images/2891/DieHard.jpg",
                uri: "http://api.netflix.com/catalog/titles/movies/70111470",
                rating: [4.0],
                bookmark: []
            },
            {
                id: 654356453,
                title: "Bad Boys",
                boxart: "http://cdn-0.nflximg.com/images/2891/BadBoys.jpg",
                uri: "http://api.netflix.com/catalog/titles/movies/70111470",
                rating: [5.0],
                bookmark: [{ id: 432534, time: 65876586 }]
            },
            {
                id: 65432445,
                title: "The Chamber",
                boxart: "http://cdn-0.nflximg.com/images/2891/TheChamber.jpg",
                uri: "http://api.netflix.com/catalog/titles/movies/70111470",
                rating: [4.0],
                bookmark: []
            },
            {
                id: 675465,
                title: "Fracture",
                boxart: "http://cdn-0.nflximg.com/images/2891/Fracture.jpg",
                uri: "http://api.netflix.com/catalog/titles/movies/70111470",
                rating: [5.0],
                bookmark: [{ id: 432534, time: 65876586 }]
            }
        ];

        const tinyRealeases = releases.reduce((acc, { id, title }) => [...acc, { id, title }], []);
        const tinyRealease = releases.map(({ id, title }) => { id, titile });
        //const tinyMapRealease = releases.map((movie) => { movie.id, movie.title });

        console.log(tinyRealeases);

        // Returnati id-urile videourilor care au rating 5.0

        //const ratingRealease = releases.map(({rating}) => {ratings = 5.0}); 
        const ratingRealease = newReleases.filter((rat) => rat.rating === 5.0)

        // Vreau la final sa am o lista de video ids
        const movieLists = [
            {
                name: "New Releases",
                videos: [
                    {
                        id: 70111470,
                        title: "Die Hard",
                        boxart: "http://cdn-0.nflximg.com/images/2891/DieHard.jpg",
                        uri: "http://api.netflix.com/catalog/titles/movies/70111470",
                        rating: 4.0,
                        bookmark: []
                    },
                    {
                        id: 654356453,
                        title: "Bad Boys",
                        boxart: "http://cdn-0.nflximg.com/images/2891/BadBoys.jpg",
                        uri: "http://api.netflix.com/catalog/titles/movies/70111470",
                        rating: 5.0,
                        bookmark: [{ id: 432534, time: 65876586 }]
                    }
                ]
            },
            {
                name: "Dramas",
                videos: [
                    {
                        id: 65432445,
                        title: "The Chamber",
                        boxart: "http://cdn-0.nflximg.com/images/2891/TheChamber.jpg",
                        uri: "http://api.netflix.com/catalog/titles/movies/70111470",
                        rating: 4.0,
                        bookmark: []
                    },
                    {
                        id: 675465,
                        title: "Fracture",
                        boxart: "http://cdn-0.nflximg.com/images/2891/Fracture.jpg",
                        uri: "http://api.netflix.com/catalog/titles/movies/70111470",
                        rating: 5.0,
                        bookmark: [{ id: 432534, time: 65876586 }]
                    }
                ]
            }
        ];

        const movieIds = movieLists.map(({ videos }) => videos.map(({ id }) => id));
        console.log(movieIds);


    </script>

    </html>
</DOCTYPE>